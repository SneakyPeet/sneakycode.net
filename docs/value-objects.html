<!DOCTYPE html>

<html></html><html class="has-navbar-fixed-top"><head><meta charset="utf-8" content="text/html" /><meta content="width=device-width, initial-scale=1" name="viewport" /><link href="https://sneakypeet.github.io/sneakycode.net/value-objects" rel="canonnical" /><link href="https://sneakypeet.github.io/sneakycode.net/rss/" rel="alternative" title="SneakyCode" type="application/rss+xml" /><title>Value Objects</title><meta content="Pieter Koornhof" name="author" /><link href="https://sneakypeet.github.io/sneakycode.net/apple-icon-57x57.png" rel="apple-touch-icon" sizes="57x57" /><link href="https://sneakypeet.github.io/sneakycode.net/apple-icon-60x60.png" rel="apple-touch-icon" sizes="60x60" /><link href="https://sneakypeet.github.io/sneakycode.net/apple-icon-72x72.png" rel="apple-touch-icon" sizes="72x72" /><link href="https://sneakypeet.github.io/sneakycode.net/apple-icon-76x76.png" rel="apple-touch-icon" sizes="76x76" /><link href="https://sneakypeet.github.io/sneakycode.net/apple-icon-114x114.png" rel="apple-touch-icon" sizes="114x114" /><link href="https://sneakypeet.github.io/sneakycode.net/apple-icon-120x120.png" rel="apple-touch-icon" sizes="120x120" /><link href="https://sneakypeet.github.io/sneakycode.net/apple-icon-144x144.png" rel="apple-touch-icon" sizes="144x144" /><link href="https://sneakypeet.github.io/sneakycode.net/apple-icon-152x152.png" rel="apple-touch-icon" sizes="152x152" /><link href="https://sneakypeet.github.io/sneakycode.net/apple-icon-180x180.png" rel="apple-touch-icon" sizes="180x180" /><link href="https://sneakypeet.github.io/sneakycode.net/android-icon-192x192.png" rel="icon" sizes="192x192" type="image/png" /><link href="https://sneakypeet.github.io/sneakycode.net/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" /><link href="https://sneakypeet.github.io/sneakycode.net/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png" /><link href="https://sneakypeet.github.io/sneakycode.net/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" /><link href="https://sneakypeet.github.io/sneakycode.net/manifest.json" rel="manifest" /><meta content="#ffffff" name="msapplication-TileColor" /><meta content="ms-icon-144x144.png" name="msapplication-TileImage" /><meta content="#ffffff" name="theme-color" /><meta content="SneakyCode" property="og:site_name" /><meta content="article" property="og:type" /><meta content="Value Objects" property="og:title" /><meta property="og:description" /><meta content="https://sneakypeet.github.io/sneakycode.net/value-objects" property="og:url" /><meta content="domain driven design" property="article:tag" /><meta content="ddd" property="article:tag" /><meta content="value objects" property="article:tag" /><meta content="immutability" property="article:tag" /><link href="https://sneakypeet.github.io/sneakycode.net/style.css" rel="stylesheet" /><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" /></head><body><nav class="navbar is-fixed-top is-dark has-gradient" role="navigation"><div class="navbar-brand"><a class="navbar-item has-text-weight-bold" href="https://sneakypeet.github.io/sneakycode.net/">sneakycode</a></div></nav><nav aria-label="main navigation" class="navbar is-fixed-bottom is-dark has-gradient" role="navigation"><div class="navbar-brand"><a aria-label="home" class="navbar-item" href="https://sneakypeet.github.io/sneakycode.net/"><span class="icon"><i class="fa fa-lg fa-bath"></i></span></a><a aria-label="history" class="navbar-item" href="https://sneakypeet.github.io/sneakycode.net/all-posts"><span class="icon"><i class="fa fa-lg fa-history"></i></span></a><a aria-label="tags" class="navbar-item" href="https://sneakypeet.github.io/sneakycode.net/tags"><span class="icon"><i class="fa fa-lg fa-tags"></i></span></a><a aria-label="rss" class="navbar-item" href="https://sneakypeet.github.io/sneakycode.net/rss"><span class="icon"><i class="fa fa-lg fa-rss"></i></span></a><a aria-label="github" class="navbar-item" href="https://github.com/sneakypeet" target="_blank"><span class="icon"><i class="fa fa-lg fa-github"></i></span></a><a aria-label="twitter " class="navbar-item" href="https://twitter.com/PieterKoornhof" target="_blank"><span class="icon"><i class="fa fa-lg fa-twitter"></i></span></a></div></nav><div class="section"><div class="container"><div class="columns is-8 is-variable is-desktop"><article class="column is-three-quarters-desktop"><h1 class="title has-text-weight-light">Value Objects</h1><p class="subtitle is-6"><span class="tags"><span class="tag is-primary">2015-02-11</span><a class="tag" href="https://sneakypeet.github.io/sneakycode.net/tag/ddd">ddd</a><a class="tag" href="https://sneakypeet.github.io/sneakycode.net/tag/domain driven design">domain driven design</a><a class="tag" href="https://sneakypeet.github.io/sneakycode.net/tag/immutability">immutability</a><a class="tag" href="https://sneakypeet.github.io/sneakycode.net/tag/value objects">value objects</a></span></p><div class="has-text-justified"><p>Continuing on the domain object theme from <a href="http://sneakycode.net/entity-is-for-identity/">my previous post</a>, we will be discussing Value Objects.</p><p>To recap, Domain Entities want to persist their value over time and can be uniquely identified by a single identification property.</p><p>Next we will discuss Value Objects. </p><p>So what is it?</p><p><strong>A Value Object is uniquely identified by the values of its properties.</strong> </p><p>Multiple instances of a value object with the same properties, represent the same object in a particular context.</p><p>A simple example can be a point on an x-y axis.</p>
<pre class="syntax"><code class="csharp"><span></span><span class="k">public</span> <span class="k">class</span> <span class="nc">Point</span>
<span class="p">{</span>
	<span class="k">public</span> <span class="nf">Point</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">){</span>
		<span class="k">this</span><span class="p">.</span><span class="n">X</span> <span class="p">=</span> <span class="n">x</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="n">Y</span> <span class="p">=</span> <span class="n">y</span><span class="p">;</span>
	<span class="p">}</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">X</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">public</span> <span class="kt">int</span> <span class="n">Y</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>

<span class="kt">var</span> <span class="n">a</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Point</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">5</span><span class="p">);</span>
<span class="kt">var</span> <span class="n">b</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Point</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">5</span><span class="p">);</span>
</code></pre><p>It is clear that <code>point a</code> and <code>point b</code> in our example are the same point because <code>a.X == b.X</code> and <code>a.Y == b.Y</code>. They represent the exact same value on our graph.</p><p>Thus identify our object by its value.</p><p><strong>Value objects are immutable.</strong></p><p>If we need to change the state of a value object, it means that the core of what the value object represents gets changed. This leaves us with the following guidelines.</p>
<ul>
  <li>A value object will not have methods that changes it's internal state. This is why our setters on <code>Point</code> are private.</li>
  <li>If you need to do a calculation against a value and require a value of the same type back, you return a new instance. This means that the initial value will always keep its integrity. Another example of this in .net is <code>DateTime</code>. The <code>AddDays</code> method on DateTime returns a new DateTime instance. <code>csharp
public Point MoveX(int delta)
{
return new Point(this.X + delta, this.Y);
}
</code></li>
  <li><p>When you are replacing a value object property on another object, you replace it instead of altering the existing object. <code>csharp
public Class Graph 
{
private Point startingPoint;
public void SetStartingPoint(Point startingPoint)
{
	this.startingPoint = startingPoint;
}
}
</code></p></li>
</ul><p><strong>A Real World Example</strong></p><p>Now that we have the basics down, lets look at a more realistic real world example. Suppose we have a <code>Member</code> entity with an <code>Address</code> property (with <code>Address</code> being a value object).</p><p>The biggest difference between our <code>Point</code> and <code>Address</code> examples are that we would want to store our address for retrieval later. If you read my previous post you are probably wondering if <code>Address</code> should not instead be an Entity. That depends 100% on your domain.</p><p>Lets assume we are storing our Member data in a SQL database, in the member table. We might store our address in one of the following ways.</p>
<ol>
  <li>Directly in the member table with a column for each property.</li>
  <li>In a separate address table as a one to one mapping. Thus each member still has one address.</li>
  <li>In a separate address table as a one to many mapping, assuming that the member can have more than one address.</li>
</ol><p>Our member entity knows nothing about how data gets stored. It will only know that it either has one or many addresses to keep track of.</p><p>For options 1 and 2 we use a value object. Even though for option 2 we have a separate table, we still use a value object as our domain does not care about tables. The member carries the identity so the address does not have to. We can easily write a method to change the member's address.</p>
<pre class="syntax"><code class="csharp"><span></span><span class="k">public</span> <span class="n">Class</span> <span class="n">Member</span> 
<span class="p">{</span>
	<span class="k">public</span> <span class="n">Address</span> <span class="n">Address</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">private</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
	<span class="k">public</span> <span class="k">void</span> <span class="nf">ChangeAddress</span><span class="p">(</span><span class="n">Address</span> <span class="n">address</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="n">Address</span> <span class="p">=</span> <span class="n">address</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre><p>Option 3 provides a bit of a challenge. If we have multiple addresses how do we know which address needs to change? In this case, even though address still fits our value object model, we need to remember that we want to have the address identity over time. This does not count for option 1 and 2 as the member carries the identity. But for option 3 our address needs to carry its identity and will be an entity instead of a value object.</p><p><strong>How to identify a Value Object</strong></p><p>The next question is how do we point out to other developers that our object is in fact a value object? Most other objects will have their job as part of their name for example <code>UserRepository</code> or <code>MemberFactory</code> etc. Our entities will inherit from IEntity. We won't be going around calling our address <code>AddressValueObject</code> though and inheriting from an interface like <code>IValueObject</code> does not make sense since we will not share common functionality. I still feel that it is useful to indicate what our object does. We can do one of the following:</p>
<ul>
  <li>Inherit from <code>IValueObject</code>. Even though I just said that this makes no sense, it does make sense. We are calling our object what it is.</li>
  <li>You can write a comment. This serves the same function as <code>IValueObject</code>, although if you are writing the comment you might as well just add the inheritance.</li>
  <li>You can leave your object as is, and have the user of the object infer that it is a value object by noting it's immutability and usage.</li>
</ul><p>What you choose should be determined by the experience of your team.</p><p>___ We are by no means done with value objects and in my next post I will be talking about more complex value objects.</p><p>Please post suggestions and critique in the comments. Discussion is how we solve problems well. Till next time.</p><p><a href="http://www.codeproject.com/script/Articles/BlogFeedList.aspx?amid=8804440" rel="tag" style="display:none">CodeProject</a></p></div></article><div aria-label="pagination" class="column" role="navigation"><div class="short-timeline"><div class="timeline is-rtl"><div class="timeline-header"><a class="tag is-primary" href="https://sneakypeet.github.io/sneakycode.net/code-comments-are-lies">Older</a></div><div class="timeline-item"><div class="timeline-marker"></div><div class="timeline-content"><a class="header" href="https://sneakypeet.github.io/sneakycode.net/code-comments-are-lies">Code Comments are Lies</a></div></div><div class="timeline-header"><a class="tag is-primary" href="https://sneakypeet.github.io/sneakycode.net/make-those-value-objects-work-for-you">Newer</a></div><div class="timeline-item"><div class="timeline-marker"></div><div class="timeline-content"><a class="header" href="https://sneakypeet.github.io/sneakycode.net/make-those-value-objects-work-for-you">Make Those Value Objects Work For You</a></div></div><div class="timeline-header"><a class="tag is-primary" href="https://sneakypeet.github.io/sneakycode.net/tag/ddd">ddd</a></div><div class="timeline-item"><div class="timeline-marker"></div><div class="timeline-content"><a class="header" href="https://sneakypeet.github.io/sneakycode.net/what-language-does-your-application-speak">What Language Does Your Application Speak</a></div></div><div class="timeline-item"><div class="timeline-marker"></div><div class="timeline-content"><a class="header" href="https://sneakypeet.github.io/sneakycode.net/reflecting-on-domain-driven-design">Reflecting on Domain Driven Design</a></div></div><div class="timeline-item"><div class="timeline-marker"></div><div class="timeline-content"><a class="header" href="https://sneakypeet.github.io/sneakycode.net/anemia-induced-memory-loss">Anemia induced memory loss</a></div></div><div class="timeline-item"><div class="timeline-marker"></div><div class="timeline-content"><a class="header" href="https://sneakypeet.github.io/sneakycode.net/aggregates-and-persistence">Aggregates and Persistence</a></div></div><div class="timeline-item"><div class="timeline-marker"></div><div class="timeline-content"><a class="header" href="https://sneakypeet.github.io/sneakycode.net/getting-wooed-by-fsharp">Getting wooed by F#</a></div></div><div class="timeline-item"><div class="timeline-marker"></div><div class="timeline-content"><a class="header" href="https://sneakypeet.github.io/sneakycode.net/modeling-with-aggregates">Modeling with Aggregates</a></div></div><div class="timeline-item"><div class="timeline-marker"></div><div class="timeline-content"><a class="header" href="https://sneakypeet.github.io/sneakycode.net/make-those-value-objects-work-for-you">Make Those Value Objects Work For You</a></div></div><div class="timeline-item"><div class="timeline-marker"></div><div class="timeline-content"><a class="header" href="https://sneakypeet.github.io/sneakycode.net/domain-driven-design-app-structure-part-2">Domain Driven Design App Structure part 2</a></div></div><div class="timeline-item"><div class="timeline-marker"></div><div class="timeline-content"><a class="header" href="https://sneakypeet.github.io/sneakycode.net/domain-driven-design-app-structure">Domain Driven Design App Structure</a></div></div><div class="timeline-item"><div class="timeline-marker"></div><div class="timeline-content"><a class="header" href="https://sneakypeet.github.io/sneakycode.net/intro-to-practical-domain-driven-design">Introduction To Practical Domain Driven Design</a></div></div><div class="timeline-header"><a class="tag is-primary" href="https://sneakypeet.github.io/sneakycode.net/tag/immutability">immutability</a></div><div class="timeline-item"><div class="timeline-marker"></div><div class="timeline-content"><a class="header" href="https://sneakypeet.github.io/sneakycode.net/make-those-value-objects-work-for-you">Make Those Value Objects Work For You</a></div></div><div class="timeline-header"><span class="tag is-primary">end</span></div></div></div></div></div></div></div></body></html>